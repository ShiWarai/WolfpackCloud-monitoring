---
name: sync-wiki-with-code
description: Analyze code changes and automatically fix wiki documentation. Use when committing changes, before creating a PR, or when the user asks to sync wiki with code, update documentation, or check if docs are outdated.
---

# Sync Wiki with Code

Анализирует изменения в коде и **автоматически исправляет** wiki-документацию.

## Workflow

### 1. Получить изменения

```bash
git diff --name-only HEAD
git diff --name-only --cached
```

Если нет незакоммиченных изменений — анализируй последний коммит:
```bash
git diff --name-only HEAD~1
```

### 2. Понять суть изменений

Прочитай изменённые файлы и определи:
- Что изменилось (конфигурация, API, установка, архитектура)
- Какие конкретные значения поменялись (порты, версии, переменные, команды)

### 3. Найти и прочитать релевантные wiki-страницы

```bash
find wiki -name "*.md" -type f
```

Прочитай каждую страницу и найди места, где упоминаются изменённые значения.

### 4. ИСПРАВИТЬ расхождения

**Не спрашивай подтверждение — сразу исправляй:**

- Устаревшие значения → замени на актуальные
- Неактуальные инструкции → перепиши
- Отсутствующая информация о новом функционале → добавь
- Информация об удалённом функционале → удали или пометь deprecated

### 5. Добавить изменения в staging

После исправлений:
```bash
git add wiki/
```

### 6. Сообщить что сделано

Кратко перечисли:
```
✅ Исправлено в wiki:
- Installation.md: обновлено время жизни кода (15 мин → 10 мин)
- Server-Setup.md: добавлена новая переменная NEW_VAR
- API-Reference.md: удалён устаревший эндпоинт /old-api
```

## Принципы

- **Действуй, не спрашивай** — если расхождение очевидное, исправь
- **Сохраняй стиль** — если wiki на русском, пиши на русском
- **Минимальные изменения** — меняй только то, что реально устарело
- **Не выдумывай** — если не уверен что должно быть, лучше не трогай

## Особые случаи

### Крупный рефакторинг

Если изменения настолько большие, что wiki нужно переписывать с нуля:
1. Сообщи об этом
2. Предложи план (какие страницы переписать/удалить/создать)
3. Жди подтверждения только в этом случае

### Неоднозначные изменения

Если непонятно, как именно обновить wiki (например, изменилась логика, а не конкретное значение):
1. Опиши проблему
2. Предложи варианты
3. Жди уточнения

Для простых случаев (версия, порт, переменная, команда) — исправляй сразу без вопросов.
